{% extends 'base.html' %} {% block title %}{{post.title_tag }}{% endblock %}
{%block content %}

<h1>{{ post.title }}</h1>
<small>
  By:{{ post.author.first_name }} {{ post.author.last_name }}
  <!--  -->
  {% if user.is_authenticated %}
  <!--  -->
  {% if user.id == post.author.id %}

  <a href="{% url 'update_post' post.pk %}">(Edit)</a>
  <a href="{% url 'delete_post' post.pk %}">(Delete)</a>
  <!--  -->
  {% endif %}
</small>
<br />
<small>
  <i> {{ post.created_on }} </i>
</small>
<hr />
<br />
{{ post.content|safe }}
<br />
<br />
<a href="{% url 'home' %}" class="btn btn-primary">Back</a>
<br />
<br />
<hr />
<br />
<strong>
  {% if user.is_authenticated %}
  <form action="{% url 'like_post' post.pk %}" method="POST">
    {% csrf_token %}
    <!--  -->
    {% if liked %}
    <button
      type="submit"
      name="post_id"
      value="{{post.id}}"
      class="btn btn-danger"
    >
      Unlike
    </button>
    {% else %}
    <button
      type="submit"
      name="post_id"
      value="{{post.id}}"
      class="btn btn-success"
    >
      Like
    </button>
    {% endif %}
  </form>
  {% else %}
  <small>Login to Like Post</small>
  {% endif %}
  <!-- The number of likes goes before the closing strong tag -->
  <span class="text-secondary">{{ post.number_of_likes }} </span>
</strong>
{% endif %} {% endblock %}
